I"¡1<p>It‚Äôs been a while since I have worked on a React Native app. In that time, <code class="highlighter-rouge">create-react-native-app</code> (CRNA) has been deprecated, and <code class="highlighter-rouge">expo-cli</code> has taken its place as the advised route. There is still <code class="highlighter-rouge">react-native init</code>, and Infinite Red has <code class="highlighter-rouge">ignite</code>. That is four different ways of bootstrapping a React Native app.</p>

<p>Before I continue, let me be clear on what I want:</p>

<ul>
  <li>I want to use ‚Äúbest practices‚Äù in my app architecture‚Ää-‚Ääfor state, communication with my AWS-based backend, navigation, and so on.</li>
  <li>I want to develop, debug, and test on emulators or real devices. My app will not be running inside a ‚Äúwalled garden‚Äù.</li>
  <li>I want to be able to distribute my apps on the Apple App Store and Google Play Store.</li>
  <li>I want the bootstrap solution to be supported by the community or an organization that isn‚Äôt going anywhere.</li>
  <li>It needs to ‚Äúwork with‚Äù my chosen IDE‚Ää-‚ÄäVisual Studio Code.</li>
</ul>

<p>Let‚Äôs start with the obvious statement. All of the solutions for bootstrapping do the job that is proposed. It‚Äôs really a case of what opinions they have when you bootstrap a project.</p>

<p>Note that throughout this article, I‚Äôm going to use the term ‚Äúemulator‚Äù to indicate both simulators (via XCode for iOS) and emulators (via Android Studio for Android).</p>

<h2 id="the-crowd-opinion">The crowd opinion</h2>

<p>Naturally, I took to Twitter to start the investigation:</p>

<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">So CRNA is dead, <a href="https://twitter.com/expo?ref_src=twsrc%5Etfw">@expo</a> CLI is new, but requires you to sign up.  How do folks like to bootstrap a <a href="https://twitter.com/reactnative?ref_src=twsrc%5Etfw">@ReactNative</a> app now?</p>&mdash; Adrian Hall (@FizzyInTheHall) <a href="https://twitter.com/FizzyInTheHall/status/1070386921623318528?ref_src=twsrc%5Etfw">December 5, 2018</a></blockquote>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>It looks like a horse race between <code class="highlighter-rouge">react-native init</code> and <code class="highlighter-rouge">expo-cli</code>! After experiencing all of them, I can see why this is the case.</p>

<h2 id="react-native-init">react-native init</h2>

<p>When you install the development environment for React Native, you probably installed this:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="o">[</span><span class="nb">sudo</span><span class="o">]</span> npm <span class="nb">install</span> <span class="nt">-g</span> react-native-cli
</code></pre></div></div>

<p>That‚Äôs it for setup. Now, how about bootstrapping?</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>react-native init RNIApp
</code></pre></div></div>

<p>Here, <code class="highlighter-rouge">RNIApp</code> is the name of the directory (and the app) that I am developing. When done, here is what the layout looks like:</p>

<p><img src="/assets/images/2018-12-10-picture1.png" alt="" /></p>

<p>There are minimal opinions here and all are easily changeable:</p>

<ul>
  <li>A single ‚ÄúApp‚Äù entry-point (rather than one per platform).</li>
  <li>Jest for testing.</li>
  <li>Babel for compilation of ES2016 to JavaScript.</li>
  <li>Yarn for package management.</li>
</ul>

<p>The Good Things:</p>
<ul>
  <li>It‚Äôs all set up for Android and iOS out of the box‚Ää-‚Ääno need to eject to compile.</li>
  <li>It‚Äôs minimalist‚Ää-‚Ääthere is very little opinion, and everything is easily changed.</li>
  <li>You can easily include native code.</li>
</ul>

<p>The Bad Things:</p>
<ul>
  <li>It takes a long time for the first compilation.</li>
  <li>If React Native updates the android/ios directories, your app won‚Äôt get the changes.</li>
  <li>It isn‚Äôt ‚Äúexpo‚Äù ready, so you have to use emulators to run the code.</li>
  <li>There is a lot of boiler-plate code that you will have to establish prior to actually getting a viable app.</li>
  <li>I‚Äôve found that the VS Code debugging against emulators is a little problematic. Sometimes, the debugging session won‚Äôt be able to connect to the emulator even though the app runs.</li>
</ul>

<p>I would use <code class="highlighter-rouge">react-native init</code> if I was planning on adding a library that isn‚Äôt supported in Expo. (AWS Amplify‚Ää-‚Ääone of my go to libraries for connecting to the AWS cloud‚Ää-‚Ääis supported by Expo).</p>

<h2 id="expo-cli">expo-cli</h2>

<p>My next one to try was the <code class="highlighter-rouge">expo-cli</code>. This is the replacement for <code class="highlighter-rouge">create-react-native-app</code> (or CRNA). CRNA was maintained by the community and had no ties to another organization. Now that Expo has taken it over, they‚Äôve got ties for publishing Expo apps and building on their backend. These are all, in the whole, good things. You don‚Äôt need to sign up for an Expo account if you aren‚Äôt using these things. That means if you were using CRNA, just use <code class="highlighter-rouge">expo-cli</code> instead and you won‚Äôt lose functionality.¬†</p>

<p>Installing the <code class="highlighter-rouge">expo-cli</code> is as easy as all the others:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="o">[</span><span class="nb">sudo</span><span class="o">]</span> npm <span class="nb">install</span> <span class="nt">-g</span> expo-cli
</code></pre></div></div>

<p>Then you can easily initialize a project:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>expo init ExpoApp
</code></pre></div></div>

<p>This gives you a choice. Do you want a minimal setup (which is much like the CRNA option) or a better setup with tabs and react-navigation. I opted for the minimal setup to see what that looks like first:</p>

<p><img src="/assets/images/2018-12-10-picture2.png" alt="" /></p>

<p>In the minimal configuration, there is very little opinion:</p>

<ul>
  <li>Expo is the preferred method of running the app.</li>
  <li>Babel with an ‚ÄúExpo‚Äù set of presets is used.</li>
  <li>Yarn is preferred but not required for package management</li>
</ul>

<p>The Good Things:</p>
<ul>
  <li>It works with Expo.</li>
  <li>No android/ios directories for a simplified view of the app.</li>
</ul>

<p>The Bad Things:</p>
<ul>
  <li>Uses a ‚Äúcustom‚Äù version of react-native pulled from Expo rather than the standard version of react-native.</li>
  <li>The ‚Äúentry point‚Äù is not App.js, but something in a node_module, which makes it more opaque.</li>
  <li>You need to eject to do native library development.</li>
</ul>

<p>The ‚Äútabs‚Äù template gives you more stuff:</p>

<p><img src="/assets/images/2018-12-10-picture3.png" alt="" /></p>

<p>This template adds <code class="highlighter-rouge">@expo/samples</code> as a dependency, which has no GitHub repository (so I can‚Äôt check out the source code prior to downloading) and no README. I had to go and check out what was in it in the <code class="highlighter-rouge">node_modules</code> directory. It‚Äôs not a particularly big nor important dependency, but the lack of transparency is disturbing. Other than this glaring point, it also adds react-navigation, which is fairly standard as the screen navigation solution.</p>

<p>The Good Things:</p>
<ul>
  <li>It‚Äôs given you a lot of structure right in the template.</li>
  <li>The fact that you have templates opens up the way for future different templates (in which case, why not just use Yeoman, but I digress).</li>
  <li>It‚Äôs added testing with Jest.</li>
</ul>

<p>The Bad Things:</p>
<ul>
  <li>It doesn‚Äôt explain what is in that samples package. I realize that it‚Äôs just the content for two sample screens, but a README and GitHub repo would have been nice.</li>
  <li>It uses a custom version of react-native libraries. This is bad because it hides the version of react-native that you are using.</li>
  <li>It loads <code class="highlighter-rouge">Icon</code> from <code class="highlighter-rouge">expo</code> instead of <code class="highlighter-rouge">react-native-vector-icons</code>. I appreciate this is because it doesn‚Äôt require linking, but it‚Äôs yet another hard dependency with versioning problem to solve.</li>
</ul>

<p>I‚Äôm sure there are good reasons for all of this, and I trust that the react-native version will be kept up to date.  Still, this is causing me more investigation to ensure I know what I am playing with.</p>

<p>In terms of ‚Äútime‚Äù that will be saved in bootstrapping, the tabs template will save about a days worth of development time, but the blank template won‚Äôt save anything.</p>

<h2 id="ignite">ignite</h2>

<p>New (to me) is <a href="https://infinite.red/ignite">ignite by Infinite Red</a>. Installing this is as easy as the others:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="o">[</span><span class="nb">sudo</span><span class="o">]</span> npm <span class="nb">install</span> <span class="nt">-g</span> ignite-cli
</code></pre></div></div>

<p>Then initialize the app:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ignite new IgniteApp
</code></pre></div></div>

<p>Gone is the minimal look‚Ää-‚Ääyou get <strong>Andross</strong> (which includes React Navigation, Redux, and Redux Saga) or <strong>Bowser</strong> (which includes React Navigation, MobX State Tree and TypeScript). The ignite process for Bowser crashed. In addition, there were some quirks in the ignition process. I selected Andross because of these problems (even though I wanted the TypeScript support).</p>

<p>The ignition process also asks you about which libraries you want to use, with (in general) only one supported, so you get to include it or not. After all is done (and it takes a long time), this is what the file structure looks like:</p>

<p><img src="/assets/images/2018-12-10-picture4.png" alt="" /></p>

<p>Pre-installed dependencies (not including the libraries that you asked for during the ignition process) include:</p>
<ul>
  <li>apisauce (Axios plus request/response transforms)</li>
  <li>ramda (A functional library)</li>
  <li>redux (with redux-persist and redux-saga and reduxsauce)</li>
  <li>Storybook (a development environment for UI components)</li>
  <li>enzyme (testing utilities for React)</li>
  <li>snazzy (stylish linter output)</li>
  <li>reactotron (remote control for your app)</li>
</ul>

<p>That‚Äôs a lot of boiler plate. In addition, a lot of the structure of the app is taken care of for you.</p>

<p>The Good Things</p>
<ul>
  <li>There are a lot of wiring boilerplate done for you.</li>
  <li>You will probably knock off 2+ weeks of development time off your project by using ignite IF you want to use the environment that is set up</li>
  <li>It is set up as if it were ‚Äúreact-native init‚Äù with a template, so it‚Äôs easy to convert out to do native development.</li>
</ul>

<p>The Bad Things</p>
<ul>
  <li>There is so much done for you that you may find it difficult to change the things you don‚Äôt like.</li>
  <li>The ignite CLI seems to be very buggy.</li>
  <li>There are only two templates, which means not a lot of selection for the things you want to control.</li>
</ul>

<h2 id="so-what-will-i-use">So, what will I use?</h2>

<p>I‚Äôm a believer in understanding what goes into the code you write.  As a result of that, I prefer to not use templates that do a lot.  I might use the tabs template from <code class="highlighter-rouge">expo-cli</code>, but that would be as much template as I would want.</p>

<p>I‚Äôm more likely to look at <code class="highlighter-rouge">react-native init</code> or<code class="highlighter-rouge"> expo-cli</code> with the blank template.</p>

<p>In terms of my debugging, etc. situation, relying on expo early on seems like a good idea.  However, I have concerns (which I should probably just get over) as to that react-native library stored on GitHub.  That being said, I can always eject from the expo version and revert to <code class="highlighter-rouge">react-native init</code> form.  As a result of all that, I‚Äôm going to go with the <code class="highlighter-rouge">expo-cli</code> version.</p>

:ET