I"ﬂz<p>I‚Äôm building a demo Android app that is sort of like Instagram, but with some new cloud features (which I will mention as I go along) and a different design to make it different.  I plan to build this with the latest architecture for Android, in Kotlin, and learning a bunch of Android dev tricks along the way.  As with everything, there is a start, and this is that post.  I‚Äôm not going to tell you how to build your first Android app - there are plenty of tutorials on that.  I‚Äôm just going to cover some of the things that I found useful.</p>

<p>Yes, this is a tutorial sort of post series that will help me remember tricks for Android.  I just hope it is useful for you too.</p>

<h2 id="building-a-splash-screen">Building a Splash Screen</h2>

<p>One of the things I want to do is store a bunch of configuration and feature flags remotely.  This means I‚Äôm going to need to go to the network to download that configuration before I can continue to the main app.  Every single tutorial for producing a splash screen goes the same way.  You create an activity, attach a background and remove the layout file.  Move on.  In my case, this didn‚Äôt actually work.  I need the layout to ensure that I could place a progress bar on the page, pop up a dialog if the initial configuration failed, and other things.  So, how do I fix that?  I use two layout screens.  More precisely, I have a splash screen that only puts the background up and then it transitions to the second screen where I do the actual initialization.</p>

<h3 id="step-1-create-a-background">Step 1: Create a background</h3>

<p>I‚Äôll freely admit that I am bad at graphic design, so I download pictures from the Internet and use those.  You want to look for an image that is <strong>1280x1920</strong> and free for reuse.  <a href="https://images.google.com">Google Images</a> is your friend here.  Look in the *Tools** menu to specify the size and license requirements.  Android comes in various pixel densities (or dots per inch - <code class="highlighter-rouge">dpi</code>).  You specify distances in display points (dp) instead of pixels, and need to transfer between them (it‚Äôs easy).  There are several pixel densities that need to be supported:</p>

<table>
  <thead>
    <tr>
      <th>suffix</th>
      <th>pixel density</th>
      <th>background image size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">-ldpi</code></td>
      <td>120 dpi</td>
      <td>240x360</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">-mdpi</code></td>
      <td>160 dpi</td>
      <td>320x480</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">-tvdpi</code></td>
      <td>213 dpi</td>
      <td>426x639</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">-hdpi</code></td>
      <td>240 dpi</td>
      <td>480x720</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">-xhdpi</code></td>
      <td>360 dpi</td>
      <td>640x960</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">-xxhdpi</code></td>
      <td>480 dpi</td>
      <td>960x1440</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">-xxxhdpi</code></td>
      <td>640 dpi</td>
      <td>1280x1920</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>You can easily adjust the DPI setting on your phone using <a href="https://forum.xda-developers.com/android/apps-games/root-window-manipulator-t2846784?">UI Tuner</a> if you have rooted your phone.  This allows you to check out the various images on a real phone.</p>
</blockquote>

<p>If you wanted to provide a unique background image for the <code class="highlighter-rouge">xhdpi</code> pixel density, you would place it in <code class="highlighter-rouge">res/drawable-xhdpi</code>.  Since graphics programs are better at scaling than the device and you don‚Äôt want to slow down your start-up time before loading the image, you need to provide splash screen backgrounds for each pixel density you want to support.  I fired up <a href="https://www.gimp.org/">Gimp</a>, loaded the image (which was a JPEG), used <strong>Image</strong> &gt; <strong>Scale Image</strong> to scale it to the right size, then used <strong>File</strong> &gt; <strong>Export as‚Ä¶</strong> to export the new image as <code class="highlighter-rouge">splashscreen.png</code>, placing it in the right drawable folder.  I did, of course, have to create all the different drawable folders for this.</p>

<p>Now that I‚Äôve got the images for the background, I can create a <code class="highlighter-rouge">SplashActivity</code>.  Use <strong>New</strong> &gt; <strong>Activity</strong> &gt; <strong>Empty Activity</strong>, but uncheck the <strong>Generate Layout File</strong> checkbox and check the <strong>Launcher Activity</strong> file.</p>

<p><img src="/assets/images/2019-08-15-image1.png" alt="" /></p>

<p>The code for this SplashActivity is fairly simple:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="nn">com.tailwind.app.photos</span>

<span class="k">import</span> <span class="nn">android.content.Intent</span>
<span class="k">import</span> <span class="nn">androidx.appcompat.app.AppCompatActivity</span>
<span class="k">import</span> <span class="nn">android.os.Bundle</span>

<span class="kd">class</span> <span class="nc">SplashActivity</span> <span class="p">:</span> <span class="n">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="nv">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>

        <span class="n">startActivity</span><span class="p">(</span><span class="n">Intent</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">AuthenticatorActivity</span><span class="o">::</span><span class="k">class</span><span class="p">.</span><span class="n">java</span><span class="p">))</span>
        <span class="n">finish</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Note the lack of <code class="highlighter-rouge">setContentView()</code> call that is commonly used inside of activities.  This is deliberate and ensures the activity starts as quickly as possible.</p>

<p>We‚Äôll come back to the <code class="highlighter-rouge">AuthenticatorActivity</code> class later on.  In the <code class="highlighter-rouge">AndroidManifest.xml</code> file, you need to remove the launcher codes from the <code class="highlighter-rouge">MainActivity</code> if you have one, and also set a new theme on the splash activity:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;manifest</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
          <span class="na">package=</span><span class="s">"com.tailwind.app.photos"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;application</span>
            <span class="na">android:allowBackup=</span><span class="s">"false"</span>
            <span class="na">android:icon=</span><span class="s">"@mipmap/ic_launcher"</span>
            <span class="na">android:label=</span><span class="s">"@string/app_name"</span>
            <span class="na">android:roundIcon=</span><span class="s">"@mipmap/ic_launcher_round"</span>
            <span class="na">android:supportsRtl=</span><span class="s">"true"</span>
            <span class="na">android:theme=</span><span class="s">"@style/AppTheme"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;activity</span> <span class="na">android:name=</span><span class="s">".MainActivity"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;activity</span> <span class="na">android:name=</span><span class="s">".SplashActivity"</span> <span class="na">android:theme=</span><span class="s">"@style/SplashTheme"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;intent-filter&gt;</span>
                <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"android.intent.action.MAIN"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">"android.intent.category.LAUNCHER"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/intent-filter&gt;</span>
        <span class="nt">&lt;/activity&gt;</span>
    <span class="nt">&lt;/application&gt;</span>
<span class="nt">&lt;/manifest&gt;</span>
</code></pre></div></div>

<p>Finally, add a theme to <code class="highlighter-rouge">res/values/styles.xml</code> to ensure the <code class="highlighter-rouge">splashscreen.png</code> is displayed:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">"SplashTheme"</span> <span class="na">parent=</span><span class="s">"Theme.AppCompat.NoActionBar"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:background"</span><span class="nt">&gt;</span>@drawable/splashscreen<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;/style&gt;</span>
</code></pre></div></div>

<p>You can now create an <code class="highlighter-rouge">AuthenticatorActivity</code> that does whatever you want.  The app will display the splash screen and then a moment later it will switch to your next activity.  At no point will it display a white screen.</p>

<h2 id="starting-the-authenticator">Starting the Authenticator</h2>

<p>I decided to make my authenticator the next screen.  It will handle all the initialization and then handle the authentication as well.  I could probably have split the work (add an <code class="highlighter-rouge">InitializerActivity</code> and an <code class="highlighter-rouge">AuthenticatorActivity</code>) and there are certainly reasons to do that, but the code for each one is so small that I decided against it.  Here is my plan.  I‚Äôm going to put a spinner to indicate ‚Äúnetwork activity‚Äù on the screen (along with a title), then I will do to the initialization in a separate thread.  Once I am done, I‚Äôll bring up the rest of the UI for the page and hide the spinner.  This will be done using the same background as my splash screen.  The user should not see any shifts in the background as a result of the activity change.  Let‚Äôs start with the <code class="highlighter-rouge">AndroidManifest.xml</code>:</p>

<p>```xml hl_lines=‚Äù12‚Äù
<?xml version="1.0" encoding="utf-8"?></p>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="com.tailwind.app.photos">

    <application android:allowBackup="false" android:icon="@mipmap/ic_launcher" android:label="@string/app_name" android:roundIcon="@mipmap/ic_launcher_round" android:supportsRtl="true" android:theme="@style/AppTheme">
        <activity android:name=".AuthenticatorActivity" android:theme="@style/SplashTheme" />
        <activity android:name=".MainActivity" />
        <activity android:name=".SplashActivity" android:theme="@style/SplashTheme">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
I'm using the same `SplashTheme` for the new activity so that I get the same background.  Now, onto the layout:

```xml
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/splashscreen"
        tools:context=".AuthenticatorActivity"&gt;

    &lt;androidx.constraintlayout.widget.Guideline
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/authenticator_g_h50"
        android:orientation="horizontal"
        app:layout_constraintGuide_percent="0.33"/&gt;

    &lt;TextView android:text="@string/app_name"
              android:layout_width="match_parent"
              android:layout_height="0dp"
              android:layout_marginStart="32dp"
              android:layout_marginEnd="32dp"
              android:lines="1"
              android:gravity="center"
              style="@style/SplashTheme.TextView"
              app:layout_constraintEnd_toEndOf="parent"
              app:layout_constraintStart_toStartOf="parent"
              app:layout_constraintTop_toTopOf="parent"
              app:layout_constraintBottom_toTopOf="@+id/authenticator_g_h50"/&gt;
    &lt;ProgressBar
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="64dp"
        android:id="@+id/auth_progress_bar"
        style="@style/SplashTheme.Progress"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintBottom_toBottomOf="parent"/&gt;
&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;
</code></pre></div></div>

<p>Most of this is visual design.  I‚Äôm using a font called <a href="https://www.1001fonts.com/fredericka-the-great-font.html">Frederika the Great</a>.  Once you have downloaded the font, place it in <code class="highlighter-rouge">res/font/frederika.ttf</code> so that it can be referenced properly.</p>

<blockquote>
  <p>If this is the only time you use the font (or you need to support API levels less than 26), embed the title in the PNG instead.  This will reduce the binary distribution size of your app.</p>
</blockquote>

<p>In order to use this sort of font embedding, you need to have a <code class="highlighter-rouge">minSdkVersion</code> of 26.   You can set this in the <code class="highlighter-rouge">build.gradle</code> for the module:</p>

<p>```gradle hl_lines=‚Äù3‚Äù
android {
    defaultConfig {
        applicationId ‚Äúcom.tailwind.app.photos‚Äù
        minSdkVersion 26
        targetSdkVersion 29
        versionCode 1
        versionName ‚Äú1.0‚Äù
    }
}</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Onto the `res/values/styles.xml` file.  We have two new styles we have referenced here:

```xml
    &lt;style name="SplashTheme.TextView" parent="TextAppearance.AppCompat.Headline"&gt;
        &lt;item name="android:background"&gt;@android:color/transparent&lt;/item&gt;
        &lt;item name="android:textColor"&gt;@color/grey_100&lt;/item&gt;
        &lt;item name="android:fontFamily"&gt;@font/fredericka&lt;/item&gt;
        &lt;item name="android:autoSizeTextType"&gt;uniform&lt;/item&gt;
    &lt;/style&gt;

    &lt;style name="SplashTheme.Progress" parent="Widget.AppCompat.ProgressBar"&gt;
        &lt;item name="android:background"&gt;@android:color/transparent&lt;/item&gt;
    &lt;/style&gt;
</code></pre></div></div>

<p>Don‚Äôt forget to include the <code class="highlighter-rouge">grey_100</code> color in your <code class="highlighter-rouge">colors.xml</code> file:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;color</span> <span class="na">name=</span><span class="s">"grey_100"</span><span class="nt">&gt;</span>#F5F5F5<span class="nt">&lt;/color&gt;</span>
</code></pre></div></div>

<blockquote>
  <p>I‚Äôve included all the Material Design colors in my <code class="highlighter-rouge">colors.xml</code> so I can reference them anywhere!</p>
</blockquote>

<p>The style for the progress bar is fairly simple.  However, there are two notes for the style for my app name.  Firstly, note how I specify the font.  Secondly, let‚Äôs talk about dynamic text sizing.  I want the title to be as big as possible relative to the width of the phone.  To do this, I create a <code class="highlighter-rouge">TextView</code> within the <code class="highlighter-rouge">ConstraintLayout</code> that is of maximal width and has a <code class="highlighter-rouge">0dp</code> (or <code class="highlighter-rouge">match_constraint</code>) height.  I‚Äôve created a horizontal guide at 33% down the screen.  The constraints mean the <code class="highlighter-rouge">TextView</code> fills that area.  However, let‚Äôs look at the <code class="highlighter-rouge">TextView</code>:</p>

<p>```xml hl_lines=‚Äù6-7‚Äù
    <TextView android:text="@string/app_name" android:layout_width="match_parent" android:layout_height="0dp" android:layout_marginStart="32dp" android:layout_marginEnd="32dp" android:lines="1" android:gravity="center" style="@style/SplashTheme.TextView" app:layout_constraintEnd_toEndOf="parent" app:layout_constraintStart_toStartOf="parent" app:layout_constraintTop_toTopOf="parent" app:layout_constraintBottom_toTopOf="@+id/authenticator_g_h50"></TextView></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">The</span> <span class="p">`</span><span class="n">android</span><span class="p">:</span><span class="n">lines</span><span class="p">`</span> <span class="n">property</span> <span class="n">ensures</span> <span class="n">that</span> <span class="n">the</span> <span class="n">title</span> <span class="n">will</span> <span class="n">appear</span> <span class="n">on</span> <span class="n">one</span> <span class="n">line</span><span class="p">.</span>  <span class="n">The</span> <span class="p">`</span><span class="n">android</span><span class="p">:</span><span class="n">gravity</span><span class="p">`</span> <span class="n">will</span> <span class="n">center</span> <span class="n">the</span> <span class="n">text</span> <span class="n">between</span> <span class="n">the</span> <span class="n">top</span> <span class="k">of</span> <span class="n">the</span> <span class="n">screen</span> <span class="k">and</span> <span class="n">the</span> <span class="n">guideline</span><span class="p">.</span>  <span class="n">Don</span><span class="s1">'t use `wrap_content` on this view - it doesn'</span><span class="n">t</span> <span class="n">work</span> <span class="k">with</span> <span class="k">dynamic</span> <span class="n">text</span> <span class="n">sizing</span><span class="p">.</span>

<span class="k">In</span> <span class="n">retrospect</span><span class="p">,</span> <span class="n">this</span> <span class="n">would</span> <span class="n">have</span> <span class="n">been</span> <span class="n">easier</span> <span class="n">by</span> <span class="n">just</span> <span class="n">including</span> <span class="n">the</span> <span class="n">title</span> <span class="n">on</span> <span class="n">the</span> <span class="n">splash</span> <span class="n">screen</span> <span class="n">graphic</span><span class="p">.</span>  <span class="n">However</span><span class="p">,</span> <span class="n">I</span> <span class="n">learned</span> <span class="n">about</span> <span class="k">dynamic</span> <span class="n">text</span> <span class="n">sizing</span> <span class="n">along</span> <span class="n">the</span> <span class="n">way</span><span class="c1">!
</span>
<span class="n">Moving</span> <span class="n">onto</span> <span class="n">the</span> <span class="n">class</span><span class="p">,</span> <span class="n">the</span> <span class="k">next</span> <span class="n">step</span> <span class="n">is</span> <span class="k">to</span> <span class="k">do</span> <span class="n">the</span> <span class="n">initialization</span><span class="p">.</span>  <span class="n">Right</span> <span class="n">now</span><span class="p">,</span> <span class="n">I</span> <span class="n">don</span><span class="s1">'t have any initialization code, but I know it'</span><span class="n">s</span> <span class="n">coming</span><span class="p">.</span>  <span class="n">It</span><span class="s1">'s best to plan for these things.  Here is the initial code for the `AuthenticatorActivity`:

```kotlin
package com.tailwind.app.photos

import android.os.Bundle
import android.view.View
import androidx.appcompat.app.AppCompatActivity
import kotlinx.android.synthetic.main.activity_authenticator.*
import kotlin.concurrent.thread

class AuthenticatorActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_authenticator)
    }

    override fun onResume() {
        super.onResume()

        thread(start = true) {
            try {
                // Do any initialization here
                Thread.sleep(3000L)
                // End of initialization
            } catch (e: InterruptedException) {
                e.printStackTrace()
            } finally {
                runOnUiThread {
                    // Do UI changes after initialization here
                }
            }
        }
    }
}
</span></code></pre></div></div>

<p>The major note here is that the thread that does the initialization is done in the <code class="highlighter-rouge">onResume()</code> method.  This allows the layout to be hydrated so you can see it before initialization starts.</p>

<h2 id="its-an-authenticator-so-ui">It‚Äôs an Authenticator, so UI?</h2>

<p>I need a little more UI to handle the authentication requirements.  I‚Äôm going to display a pill (it looks like a button with rounded corners) filled with the social media authentication techniques that the app supports.  I‚Äôm a big believer that users should decide how they want to authenticate - not you.  I also believe you should not be running your own authentication scheme unless there is a very good reason to do so.  So I provide choices - Facebook, Google, Microsoft, and Twitter will be provided.  I want this pill to ‚Äúslide in‚Äù from the bottom of the screen once initialization is complete.</p>

<p>Let‚Äôs start with the layout additions:</p>

<p>```xml hl_lines=‚Äù9‚Äù
    <androidx.cardview.widget.CardView android:id="@+id/social_media_login_buttons" android:layout_width="match_parent" android:layout_height="64dp" app:cardCornerRadius="32dp" style="@style/SplashTheme.SocialMediaButtons" app:cardBackgroundColor="@color/background" android:layout_marginBottom="64dp" app:layout_constraintTop_toBottomOf="parent" app:layout_constraintStart_toStartOf="parent" android:layout_marginStart="16dp" app:layout_constraintEnd_toEndOf="parent" android:layout_marginEnd="16dp">
        <LinearLayout android:layout_width="match_parent" android:layout_height="match_parent" android:layout_gravity="center_vertical" style="@style/SplashTheme.SocialMediaButtons">
            <ImageButton android:contentDescription="@string/facebook_auth" android:layout_width="wrap_content" android:layout_height="wrap_content" app:srcCompat="@drawable/ic_facebook_logo" style="@style/SplashTheme.SocialMediaButton" android:id="@+id/facebook_login" android:layout_weight="1"></ImageButton>
            <ImageButton android:contentDescription="@string/google_auth" android:layout_width="wrap_content" android:layout_height="wrap_content" app:srcCompat="@drawable/ic_google_logo" style="@style/SplashTheme.SocialMediaButton" android:id="@+id/google_login" android:layout_weight="1"></ImageButton>
            <ImageButton android:contentDescription="@string/microsoft_auth" android:layout_width="wrap_content" android:layout_height="wrap_content" app:srcCompat="@drawable/ic_microsoft_logo" style="@style/SplashTheme.SocialMediaButton" android:id="@+id/microsoft_login" android:layout_weight="1"></ImageButton>
            <ImageButton android:contentDescription="@string/twitter_auth" android:layout_width="wrap_content" android:layout_height="wrap_content" app:srcCompat="@drawable/ic_twitter_logo" style="@style/SplashTheme.SocialMediaButton" android:id="@+id/twitter_login" android:layout_weight="1"></ImageButton>
        </LinearLayout>
    </androidx.cardview.widget.CardView></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Line 9 sets the top constraint of this layout so that it's off the bottom of the screen.  That's my starting point - I don't want the user to see the pill until I slide it into view.  In addition, note that I have to specify two properties on the card view to get the right background color and corner radius.  I wish these were available in a style instead, but I don't use this format regularly.  The `LinearLayout` places my four image buttons side by side equally in the pill.

&gt; On later API versions, I've found using the `CardView` for rounded corners is easier than using a `drawable` background, especially when you need a transparent background.

The styles in use here are as follows:

```xml
    &lt;style name="SplashTheme.SocialMediaButtons" parent="Widget.AppCompat.PopupWindow"&gt;
        &lt;item name="android:background"&gt;@color/background&lt;/item&gt;
        &lt;item name="android:textColor"&gt;@color/foreground&lt;/item&gt;
    &lt;/style&gt;
    &lt;style name="SplashTheme.SocialMediaButton" parent="Widget.AppCompat.Button.Borderless"&gt;
        &lt;item name="android:background"&gt;@color/background&lt;/item&gt;
        &lt;item name="android:textColor"&gt;@color/foreground&lt;/item&gt;
        &lt;item name="android:layout_gravity"&gt;center&lt;/item&gt;
        &lt;item name="android:gravity"&gt;center&lt;/item&gt;
    &lt;/style&gt;
</code></pre></div></div>

<p>The <code class="highlighter-rouge">colors.xml</code> has the following:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;color</span> <span class="na">name=</span><span class="s">"foreground"</span><span class="nt">&gt;</span>@color/grey_900<span class="nt">&lt;/color&gt;</span>
    <span class="nt">&lt;color</span> <span class="na">name=</span><span class="s">"background"</span><span class="nt">&gt;</span>@color/grey_100<span class="nt">&lt;/color&gt;</span>
</code></pre></div></div>

<p>I‚Äôve also added a dimension that I will need later.  This is in <code class="highlighter-rouge">res/values/dimens.xml</code>, but you can place it in any of the values files that has <code class="highlighter-rouge">resources</code> as a root node.  They are all treated equivalently.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;resources&gt;</span>
    <span class="nt">&lt;dimen</span> <span class="na">name=</span><span class="s">"social_media_button_offset"</span><span class="nt">&gt;</span>64dp<span class="nt">&lt;/dimen&gt;</span>
<span class="nt">&lt;/resources&gt;</span>
</code></pre></div></div>

<p>How did I pick this number? Well, it overwrites the progress bar when it moves up, so I wanted it to be in the same position.  Also, it‚Äôs high enough that if any bottom navigation bar is covering the bottom of the screen, the pill will float above that bottom navigation bar.</p>

<p>Finally, I‚Äôve also created four 48x48dp drawables.  I did this by downloading the logos as SVG files from the Internet (Wikipedia Commons is a great place for this).  I then use <strong>New</strong> &gt; <strong>Vector Asset</strong> to create each logo drawable.</p>

<p>Now that I‚Äôve got the UI defined in XML, it‚Äôs time to animate the pill into the display.  This is done in the <code class="highlighter-rouge">runOnIoThread</code> section of the <code class="highlighter-rouge">onResume()</code> method from earlier:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">runOnUiThread</span> <span class="p">{</span>
        <span class="kd">val</span> <span class="py">distance</span> <span class="p">=</span> <span class="n">resources</span><span class="p">.</span><span class="n">getDimensionPixelSize</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">dimen</span><span class="p">.</span><span class="n">social_media_button_offset</span><span class="p">).</span><span class="n">toFloat</span><span class="p">()</span>

        <span class="n">auth_progress_bar</span><span class="p">.</span><span class="n">visibility</span> <span class="p">=</span> <span class="n">View</span><span class="p">.</span><span class="n">GONE</span>
        <span class="n">social_media_login_buttons</span>
            <span class="p">.</span><span class="n">animate</span><span class="p">()</span>
            <span class="p">.</span><span class="n">translationY</span><span class="p">(-</span><span class="n">distance</span><span class="p">)</span>
            <span class="p">.</span><span class="n">setDuration</span><span class="p">(</span><span class="m">500L</span><span class="p">)</span>
            <span class="p">.</span><span class="n">alpha</span><span class="p">(</span><span class="m">1.0f</span><span class="p">)</span>
            <span class="p">.</span><span class="n">setListener</span><span class="p">(</span><span class="k">null</span><span class="p">)</span>
    <span class="p">}</span>
</code></pre></div></div>

<p>My first step is to work out how far I should move the pill.  I specify the dimension in display points, but I need to animate based on pixels.  Fortunately, the resource manager will do the conversion for me based on the device I am on right now.  Once I‚Äôve got that, I make the progress bar disappear (abruptly - no need to slide it out), and then do a simple animation, which will take a half second.  I love the <code class="highlighter-rouge">.animate()</code> method here as it makes these simple transitions really easy.</p>

<h2 id="next-steps">Next steps</h2>

<p>THe app is now runnable.  When you run it, you will see the background, then the title and progress spinner will appear for 3 seconds, then the social media login buttons will slide in from the bottom.  If you want to see the app code for yourself, take a look at <a href="https://github.com/adrianhall/tailwind-photos-for-android/tree/blog-1">my repository</a>.</p>

<p>Next for me is going to be a series of posts on how to do specific authentication schemes for my buttons.  I‚Äôll wire each one up and integrate each platform SDK, then work on the initialization code.  If you want to follow along, feel free to follow the repository, or check the new category for <a href="https://adrianhall.github.io/categories/#tailwind-photos">Tailwind Photos</a></p>
:ET